autoencoder.compile(optimizer=tf.keras.optimizers.Adamax(), loss='binary_crossentropy')

model_checkpoint_callback = ModelCheckpoint(
    filepath='/kaggle/working/autoencoder_checkpoint.h5',
    save_weights_only=False,
    save_best_only=True,
    monitor='val_loss',
    mode='min',
    verbose=1
)

history = autoencoder.fit(
    train_generator,
    validation_data=valid_generator,
    epochs=epoch,
    verbose=2,
    callbacks=[model_checkpoint_callback]
)